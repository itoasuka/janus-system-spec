janusコマンドについて
-----------------------

Janusシステムの中核をなすのがjanusコマンドです。
janusコマンドは標準入力からシステムが受信したメールを受け取り、HTMLとして出力します。
また、ホワイトリストのメンテナンスなどにも使用することができます。

janusコマンドのビルド
^^^^^^^^^^^^^^^^^^^^^^^

janusコマンドは、Go\ [#golang]_ 1.14で作成されていますので、janusコマンドのビルドにはGo 1.14の開発環境が必要です。
また、ビルドシステムにはGNU make使用することを想定しています。
具体的なビルド方法については、janusコマンドのソースプロジェクトに添付してあるREADMEを参照してください。

janusコマンドの配置
^^^^^^^^^^^^^^^^^^^^^

janusコマンドは、\ ``/opt/janus``\ ディレクトリ内に配置してあります。
このディレクトリにパスは通っていません。

janusコマンドは設定ファイルのパスを必ず指定して実行しなければなりません。
しかし、それでは不便ですので、設定ファイルのパスとして\ ``/etc/janus/config.toml``\ を指定した状態で
janusコマンドを実行できるラッパースクリプトを\ ``/usr/local/bin/janus``\ に配置してあります。
このスクリプトは以下のようなシェルスクリプトです。

.. code-block:: sh

   #!/bin/sh

   if [ -n "$JANUS_CONF" ]; then
	   /opt/janus/janus $@
   else
	   JANUS_CONF=/etc/janus/config.toml /opt/janus/janus $@
   fi

``/usr/local/bin``\ にはパスが通ってますので、通常実行するjanusコマンドはこのラッパースクリプトということになります。



.. [#golang] https://golang.org/
