PostgreSQLの構成
-----------------

Janusは、受信したメールや受信するメールの送信元のホワイトリストをPostgreSQLに保存しています。
そのため、事前にPostgreSQLにそのためのテーブルを作成して置かなければなりません。
そのためのファイルが、janusコマンドのソースプロジェクトの中に\ ``ddl.sql``\ という名前であります。
以下は、そのファイルをPostgreSQLへ適用するためのコマンドの例です。

.. code-block:: shell

   $ psql janus -U janus -W -h localhost < ddl.sql

テーブル仕様
^^^^^^^^^^^^^

Janusで使用するテーブルの各項目はすべてNULLを許容しません（NOT NULL）。

whitelist

   メールを受信する送信元メールアドレスを保存するテーブル。

   ============ ============ ==================================================
   項目名       型           説明
   ------------ ------------ --------------------------------------------------
   from_address VARCHAR      プライマリキー。メールを受信する送信元メールアドレス
   spf          BOOLEAN      TRUEのときSPFのチェックも行う
   ============ ============ ==================================================

mail

   受信したメールを保存するテーブル。

   ============ ======================== ====================================
   項目名       型                       説明
   ------------ ------------------------ ------------------------------------
   id           BIGSERIAL                プライマリキー。受信したメールの通番
   date         TIMESTAMP WITH TIME ZONE メールの受信日時
   from_address TEXT                     メールの送信元メールアドレス
   subject      TEXT                     メールのタイトル
   body         TEXT                     メールの本文
   ============ ======================== ====================================
